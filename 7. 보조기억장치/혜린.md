# ch.7 보조기억장치

## 7-1 다양한 보조기억장치

- 대표적인 보조기억장치는 하드디스크와 플래시 메모리

### 하드디스크

- 플래터: 데이터가 저장되는 곳
    - 트랙과 섹터라는 단위로 데이터를 저장
    - 여러 플래터의 동일한 트랙이 모여 실린더를 이룸
- 스핀들: 플래터를 회전시키는 구성요소. RPM 단위로 표현됨
- 헤드: 플래터를 대상으로 데이터를 읽고 쓰는 구성 요소
- 디스크암: 원하는 위치로 헤드를 이동시킴

하드디스크가 저장된 데이터에 접근하는 과정을 생각해보자. 크게 탐색 시간, 회전 지연, 전송 시간으로 나뉜다.

- 탐색시간: 접근하려는 데이터가 저장된 트랙까지 헤드를 이동시키는 시간
- 회전지연: 헤드가 있는 곳으로 플래터를 회전시키는 시간
- 전송시간: 하드 디스크와 컴퓨터 간에 데이터를 전송하는 시간

### 플래시 메모리

ex. USB 메모리, SD 카드, SSD…

- 보조기억 장치 범주에만 속하지 않고 다양한 곳에서 널리 사용하는 저장장치임. 주기억 장치 중 하나인 ROM에도 사용되고, 일상에서 사용하는 거의 모든 전자제품 안에 내장되어 있음
- 셀: 플래시 메모리에서 데이터를 저장하는 가장 작은 단위. 하나의 셀에 몇 비트를 저장할 수 있느냐에 따라 프래시 메모리 종류가 나뉨
    - SLC: 1비트 저장 가능
    - MLC: 2비트 저장 가능
    - TLC: 3비트 저장 가능
    
    썼다 기우기를 자주 반복해야 하는 경우 혹은 높은 성능을 원하는 경우 SLC, 저가의 대용량 저장장치를 원하는 경우 TLC, 중간을 원하는 경우 MLC 선택
    
- 페이지(셀들이 모여 만들어진 단위) - 블록(페이지가 모여 만들어진 단위) - 플레인(블록이 모여 만들어진 단위) - 다이(플레인이 모여 만들어진 단위)
- 플래시 메모리에서 읽기/쓰기 단위는 페이지 단위. 삭제는 블록 단위에서 이뤄짐
    
    이 때 페이지는 세 개의 상테를 가질 수 있음
    
    - Free: 어떤 데이터도 저장하고 있지 않아 새로운 데이터를 저장할 수 있는 상태
    - Valid: 이미 유효한 데이터를 저장하고 있는 상태
    - Invalid: 유효하지 않은 데이터를 저장하고 있는 상태. 사용하지 않음에도 용량을 차지함
        - 가비지 컬렉션: 유효한 페이지들만을 새로운 블록에 복사해서 기존의 블록을 삭제하는 기능

## 7.2 RAID의 정의와 종류

1TB 하드디스크 4개는 4TB 하드디스크 한 개의 성능와 안정성을 능가할 수 있다.

- 하드디스크는 수명이 있음. 따라서 RAID 방법을 사용할 수 있음
- RAID: 하드디스크와 SSD를 사용하는 기술. 데이터의 안정성 혹은 높은 성능을 위해 여러 개의 물리적 보조 기억 장치를 마치 하나의 논리적 보조기억장치처럼 사용하는 것을 의미

### RAID의 종류

RAID를 구성하는 방법은 여러개. 이 구성방법을 RAID 레벨이라고 함

- RAID 0: 여러 개의 보조기억장치에 데이터를 단순히 나누어 저장하는 구성 방식.
    - 데이터를 읽고 쓰는 속도가 빨라짐
    - 하지만 디스크 중 하나에 문제가 생기면 모든 하드 디스크의 정보를 읽는데 문제가 발생함
- RAID 1: 똑같은 복사본을 하나 더 만드는 방식
    - 하나가 문제가 생겨도 복구가 매우 간단함
    - 하드 디스크 개수가 한정되었을 때 사용 가능한 용량이 적어지는 단점. 복사본이 만들어지는 용량만큼 사용자가 사용하지 못하기 때문에.
- RAID 4: RAID 1 처럼 복사본을 만드는 대신 오류를 검출하고 복구하기 위한 정보(=패리티 비트)를 저장한 장치를 두는 구성 방식
- RAID 5: RAID 4에서는 어떤 새로운 데이터가 저장될 때마다 패리티를 저장하는 디스크에도 데이터를 쓰게 됨. 따라서 패리티를 저장하는 장치에 병목 현상이 발생하는 문제가 있음
    
    따라서 패리티 정보를 분산해서 저장하는 방식으로 RAID 4의 문제인 병목을 해소한 것이 RAID 5.
