## 12-1. 동기화란
- 협력적으로 실행되는 프로세스는 실행 순서와 자원 접근에 대한 일관성이 보장되어야 함.
- 이를 위해 **동기화**(synchronization) 필요함.

### 동기화의 의미
- 프로세스 동기화란 수행 시기를 맞추는 것을 의미.
- **실행 순서 제어**: 프로세스를 올바른 순서로 실행함.
- **상호 배제(Mutual Exclusion)**: 하나의 자원에 여러 프로세스가 동시에 접근하지 않도록 함.
- 예: 동시에 접근해서는 안 되는 자원에 둘 이상의 프로세스가 접근하면 문제 발생함.

### 생산자와 소비자 문제
- 생산자와 소비자가 동시에 공유 자원에 접근하면 예상치 못한 결과가 발생함.
- 동기화 없이 작업 순서를 제어하지 않으면 **데이터 불일치** 문제 발생함.

### 공유 자원과 임계 구역
- **공유 자원**: 여러 프로세스가 함께 사용하는 자원 (ex. 전역 변수, 파일, I/O 장치 등)
- **임계 구역(Critical Section)**: 공유 자원에 접근하는 코드 영역

#### 임계 구역 문제 해결을 위한 3가지 조건

| 조건    | 설명                                          |
| ----- | ------------------------------------------- |
| 상호 배제 | 한 프로세스가 임계 구역에 진입 중이면 다른 프로세스는 진입 불가함       |
| 진행    | 임계 구역에 진입 중인 프로세스가 없다면, 적절한 프로세스가 진입 가능해야 함 |
| 유한 대기 | 한 프로세스가 진입을 원할 경우, 언젠가는 진입할 수 있어야 함         |
- 위 조건이 충족되지 않으면 **레이스 컨디션(Race Condition)** 발생함.

## 12-2. 동기화 기법
### 뮤텍스 락 (Mutex Lock)
- 하나의 자원에 대해 하나의 프로세스만 접근하도록 제어하는 가장 단순한 동기화 기법임.
- 구성 요소


|구성 요소|설명|
|---|---|
|lock 변수|공유 자원 접근 상태를 나타냄|
|acquire()|자원이 사용 중이면 반복 확인하며 대기함 (바쁜 대기 busy-waiting)|
|release()|자원 사용 후 잠금 해제함|
- 효율성 낮음. 바쁜 대기로 CPU 자원을 낭비함.

### 세마포 (Semaphore)
- 뮤텍스 락을 일반화한 동기화 기법임.
- 자원이 **여러 개**일 때도 사용 가능함.
- 종류: **이진 세마포(0/1)** → 뮤텍스와 유사 / **카운팅 세마포** → 여러 자원 관리 가능

| 구성 요소     | 설명                              |
| --------- | ------------------------------- |
| s (정수 변수) | 접근 가능한 자원 수                     |
| wait()    | s가 0이면 대기 큐에 넣고 프로세스를 대기 상태로 만듦 |
| signal()  | 대기 중인 프로세스를 깨워 준비 상태로 전환함       |

- wait 함수는 자원이 없을 경우 프로세스를 **대기 큐**에 넣음 → 바쁜 대기 없이 CPU 낭비 방지함.

### 모니터 (Monitor)
- 고수준 동기화 도구로, 공유 자원 + 자원 접근 함수를 묶어 관리함.
- 내부에 동기화 로직이 포함되어 있어 사용이 간단함.
- 조건 변수(condition variable)를 사용해 실행 순서를 제어함.

|특징|설명|
|---|---|
|캡슐화|공유 자원과 접근 함수가 하나의 모듈에 묶임|
|조건 변수|특정 조건 만족 시에만 실행. wait/signal 역할 수행|

> 요약 정리
> - **뮤텍스**: 1명만 입장 가능. 단순하지만 busy-waiting 생길 수 있음.
> - **세마포**: 여러 명 입장 가능. 입장 수 제한. 대기 큐 이용해 효율적임.
> - **모니터**: 구조화된 동기화 시스템. 내부에서 모든 걸 알아서 처리함.


- **뮤텍스(Mutex)**
    - "한 명만 들어가게 직접 제한했다" →  내가 직접 열쇠를 관리해서 한 명만 들어가게 하는 것
- **세마포어(Semaphore)**
    - "들어갈 수 있는 티켓을 발급해서 그 인원만 들어가게끔 구성했다" →  입장권(티켓) 개수만큼 여러 명이 들어갈 수 있게 내가 직접 관리
- **모니터(Monitor)**
    - "내가 관리 안 한다. 이미 시스템에서 정해준 게 있다" →  내부적으로 알아서 동기화, 입장/대기/퇴장 등 모든 걸 시스템이 자동 관리  