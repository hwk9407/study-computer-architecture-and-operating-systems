# Chapter 08. 입출력장치
## 08-1. 장치 컨트롤러와 장치 드라이버
### 장치 컨트롤러
- 입출력 장치는 종류가 다양하고 전송률이 낮아 CPU/메모리와 직접 연결이 어려움
- 장치 컨트롤러는 입출력 장치와 컴퓨터 내부를 연결하는 중계 하드웨어

**장치 컨트롤러의 역할**
- CPU와 입출력 장치 간의 통신 중계
- 오류 검출 및 상태 확인
- 버퍼링을 통한 전송률 조정 (버퍼: 임시 저장 공간)

**내부 구성**

|구성 요소|기능 설명|
|---|---|
|**데이터 레지스터**|CPU와 장치 간 데이터 전송용 버퍼|
|**상태 레지스터**|입출력 장치의 현재 상태 저장|
|**제어 레지스터**|수행할 작업(명령) 저장|

> 고성능 장치에서는 레지스터 대신 RAM을 버퍼로 사용하기도 함

### 장치 드라이버
- 장치 컨트롤러를 제어하는 소프트웨어 프로그램
- OS가 장치 드라이버를 인식하고 실행해야 해당 장치를 사용할 수 있음
- 운영체제(OS) 또는 장치 제조사가 제공

> 하드웨어가 통신을 위해 장치 컨트롤러가 필요하다면, 소프트웨어로는 장치 드라이버가 필요함

---
## 08-2. 다양한 입출력 방법
### 프로그램 입출력 (Polling)
- CPU가 장치 컨트롤러와 직접 통신하며 레지스터 상태를 주기적으로 확인
- 구현은 간단하지만 CPU에 큰 부담

#### 메모리 접근 방식

| 방식            | 설명                    |
| ------------- | --------------------- |
| **메모리 맵 입출력** | 입출력 레지스터를 메모리 주소처럼 접근 |
| **고립형 입출력**   | 메모리 주소공간과 입출력 주소공간 분리 |

### 인터럽트 기반 입출력
- 장치가 작업 완료 시 CPU에 인터럽트 요청을 보내 알림
- CPU는 다른 작업 중에도 장치 작업을 대기 가능 → CPU 효율 증가

#### 인터럽트 우선순위 처리
- PIC(Programmable Interrupt Controller)를 통해 인터럽트 우선순위 판별
- NMI(Non-Maskable Interrupt)는 우선순위보다 우선 적용됨

### DMA 입출력 (Direct Memory Access)
- CPU를 거치지 않고 장치 ↔ 메모리 간 직접 데이터 전송
- DMA 컨트롤러가 시스템 버스를 통해 직접 접근 수행

**DMA 입출력 과정**
1. CPU가 DMA 컨트롤러에 작업 지시 (주소/방향 등)
2. DMA 컨트롤러가 장치와 메모리 간 입출력 수행
3. 완료 후 CPU에 인터럽트로 결과 알림

> DMA는 전송 중 시스템 버스를 나눠 쓰기 때문에 **Cycle Stealing**이 발생함

### 입출력 버스
- DMA 컨트롤러와 여러 장치 컨트롤러가 공유하는 별도의 버스
- 입출력 버스를 통해 시스템 버스 사용량 감소
- 예: PCI, PCI-Express 등

### 입출력 채널
- **입출력 전용 CPU** 역할을 수행하는 하드웨어
- 입출력 명령어를 **직접 인출, 해석, 실행**하며 CPU의 개입 없이 작업 수행



---

> 요약
> - **장치 컨트롤러**: 입출력 장치 ↔ 컴퓨터 연결 중계자, 버퍼링/오류 검출/상태 확인 담당
> - **장치 드라이버**: OS가 실행하는 소프트웨어, 컨트롤러와의 통신 지원
> - **프로그램 입출력**: CPU가 직접 레지스터 제어 (Polling 기반)
> - **인터럽트 입출력**: 장치 완료 시 CPU에 알림 (PIC로 우선순위 제어)
> - **DMA**: CPU 개입 없이 직접 입출력. CPU 부하 감소, Cycle Stealing 발생
> - **입출력 버스**: 장치 컨트롤러 간 전용 데이터 통로
> - **입출력 채널**: 입출력 전용 프로세서. 명령어 직접 처리
